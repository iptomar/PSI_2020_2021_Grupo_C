@model LuizaAndaluz.Models.Historia

@{
    ViewData["Title"] = "Details";
}

<div>
    <h1 class="display-4">@Html.DisplayFor(model => model.Titulo)</h1>
    <br />
    <p>@Html.DisplayFor(model => model.Descricao)<p>
        <hr />
        <dl class="row">
            @if (User.Identity.IsAuthenticated)
            {
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Estado)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Estado)
                </dd>
            }
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Nome)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Nome)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Idade)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Idade)
            </dd>
            @if (User.Identity.IsAuthenticated)
            {
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Email)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Email)
                </dd>
            }
        </dl>
</div>
@if (User.Identity.IsAuthenticated)
{
    <div>
        <form method="post" asp-action="Validar">
            <input type="hidden" name="id" value="@Model.ID" />
            <button type="submit" class="btn btn-outline-warning btn-lg">Validar</button>
        </form>
    </div>

    <br />
    <div>
        <a asp-action="Edit" asp-route-id="@Model.ID">Edit</a> |
        <a asp-action="Index">Voltar</a>
    </div>
}
<br />
<div>
    @foreach (var item in Model.Conteudo)
    {

        if (item.Tipo.Contains("png") || item.Tipo.Contains("jpg") || item.Tipo.Contains("gif") || item.Tipo.Contains("jfif"))
        {
            <img src="~/Ficheiros/@item.Ficheiro" class="rounded mx-auto d-block" style="max-width: 500px; max-height: 500px">
            <br />
        }
        else if (item.Tipo.Contains("mp4") || item.Tipo.Contains("mov"))
        {
            <div class="embed-responsive embed-responsive-21by9">
                <iframe class="embed-responsive-item" src="~/Ficheiros/@item.Ficheiro" allowfullscreen></iframe>
            </div>
            <br />
        }

    }
</div>
<div id="mapSecundario"></div>
<script>
function initMap() {
    var options = {
        zoom: 11,
        center: { lat: parseFloat(@ViewBag.Latitude), lng: parseFloat(@ViewBag.Longitude) }
    }

    var map = new google.maps.Map(document.getElementById('mapSecundario'), options);

    new google.maps.Marker({
        position: { lat: parseFloat(@ViewBag.Latitude), lng: parseFloat(@ViewBag.Longitude) }, map, title: ("Localização"),
    });
}
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzF3-at94AexQQTqYBX26DsWSvQ2h0RF0&callback=initMap">
</script>
<br />